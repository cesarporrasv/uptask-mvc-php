!function(){function e(e,t,n){const a=document.querySelector(".alert");a&&a.remove();const o=document.createElement("DIV");o.classList.add("alert",t),o.textContent=e,n.parentElement.insertBefore(o,n.nextElementSibling),setTimeout(()=>{o.remove()},5e3)}document.querySelector("#add-task").addEventListener("click",(function(){const t=document.createElement("DIV");t.classList.add("modal"),t.innerHTML='\n      <form class="form new-task">\n        <legend>Añade una nueva Tarea</legend>\n        <div class="field">\n          <label>Tarea</label>\n          <input\n            type="text"\n            name="task"\n            placeholder="Añade una tarea al Proyecto"\n            id="task"\n          />\n        </div>\n        <div class="options">\n          <input type="submit" class="submit-new-task" value="Añadir Tarea" />\n          <button type="button" class="close-modal">Cancelar</button>\n        </div>\n      </form>\n    ',setTimeout(()=>{document.querySelector(".form").classList.add("animate")},150),t.addEventListener("click",(function(n){if(n.preventDefault(),n.target.classList.contains("close-modal")){document.querySelector(".form").classList.add("close"),setTimeout(()=>{t.remove()},400)}n.target.classList.contains("submit-new-task")&&function(){const t=document.querySelector("#task").value.trim();if(""===t)return void e("Debes agregar un nombre a la tarea","error",document.querySelector(".form legend"));!async function(t){const n=new FormData;n.append("name",t),n.append("projectId",function(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}());try{const t="http://localhost:3000/api/task",a=await fetch(t,{method:"POST",body:n}),o=await a.json();if(console.log(o),e(o.message,o.type,document.querySelector(".form legend")),"success"===o.type){const e=document.querySelector(".modal");setTimeout(()=>{e.remove()},2e3)}}catch(e){console.log(e)}}(t)}()})),document.querySelector(".dashboard").appendChild(t)}))}();