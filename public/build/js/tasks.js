!function(){!async function(){try{const e="/api/tasks?id="+t(),n=await fetch(e),a=await n.json(),{tasks:s}=a;!function(e){if(0===e.length){const e=document.querySelector("#tasks-list"),t=document.createElement("LI");return t.textContent="No Hay Tareas",t.classList.add("no-tasks"),void e.appendChild(t)}const t={0:"Pendiente",1:"Completa"};e.forEach(e=>{const n=document.createElement("LI");n.dataset.taskId=e.id,n.classList.add("task");const a=document.createElement("P");a.textContent=e.name;const s=document.createElement("DIV");s.classList.add("options");const o=document.createElement("BUTTON");o.classList.add("task-status"),o.classList.add(""+t[e.status].toLowerCase()),o.textContent=t[e.status],o.dataset.taskStatus=e.status;const c=document.createElement("BUTTON");c.classList.add("delete-task"),c.dataset.idTask=e.id,c.textContent="Eliminar",s.appendChild(o),s.appendChild(c),n.appendChild(a),n.appendChild(s);document.querySelector("#tasks-list").appendChild(n)})}(s)}catch(e){console.log(e)}}();function e(e,t,n){const a=document.querySelector(".alert");a&&a.remove();const s=document.createElement("DIV");s.classList.add("alert",t),s.textContent=e,n.parentElement.insertBefore(s,n.nextElementSibling),setTimeout(()=>{s.remove()},5e3)}function t(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}document.querySelector("#add-task").addEventListener("click",(function(){const n=document.createElement("DIV");n.classList.add("modal"),n.innerHTML='\n      <form class="form new-task">\n        <legend>Añade una nueva Tarea</legend>\n        <div class="field">\n          <label>Tarea</label>\n          <input\n            type="text"\n            name="task"\n            placeholder="Añade una tarea al Proyecto"\n            id="task"\n          />\n        </div>\n        <div class="options">\n          <input type="submit" class="submit-new-task" value="Añadir Tarea" />\n          <button type="button" class="close-modal">Cancelar</button>\n        </div>\n      </form>\n    ',setTimeout(()=>{document.querySelector(".form").classList.add("animate")},150),n.addEventListener("click",(function(a){if(a.preventDefault(),a.target.classList.contains("close-modal")){document.querySelector(".form").classList.add("close"),setTimeout(()=>{n.remove()},400)}a.target.classList.contains("submit-new-task")&&function(){const n=document.querySelector("#task").value.trim();if(""===n)return void e("Debes agregar un nombre a la tarea","error",document.querySelector(".form legend"));!async function(n){const a=new FormData;a.append("name",n),a.append("projectId",t());try{const t="http://localhost:3000/api/task",n=await fetch(t,{method:"POST",body:a}),s=await n.json();if(console.log(s),e(s.message,s.type,document.querySelector(".form legend")),"success"===s.type){const e=document.querySelector(".modal");setTimeout(()=>{e.remove()},2e3)}}catch(e){console.log(e)}}(n)}()})),document.querySelector(".dashboard").appendChild(n)}))}();